function clientRectContainsPoint(e,t,n){return t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom}!function(e){var t=function(){e(".info-panel-tabs").each(function(){var t=e(this),n=null,i=null;t.find("li").each(function(){var t=e(this),a=e("#"+t.data("tab-target"));t.hasClass("active")&&(n=t,i=a),t.on("click",function(e){n!=t&&(n.removeClass("active"),i.css({display:"none"}),t.addClass("active"),a.css({display:""}),n=t,i=a)})})});var t=null;e(".info-file-info-size").each(function(){t||(t=e(this))}),e("#ilab-other-sizes").on("change",function(n){var i=e("#info-size-"+e(this).val());i!=t&&(t.css({display:"none"}),i.css({display:""}),t=i)}),e(".ilab-info-regenerate-thumbnails").on("click",function(t){var n=e(this);return!(n.data("imgix-enabled")&&!confirm("You are currently using Imgix, which makes this function rather unnecessary.  Are you sure you want to continue?"))&&(e(document).trigger("ilab-regeneration-started"),t.preventDefault(),n.css({display:"none"}),e("#ilab-info-regenerate-status").css({display:""}),e.post(ajaxurl,{action:"ilab_regenerate_thumbnails_manual",post_id:n.data("post-id")},function(t){n.css({display:""}),e("#ilab-info-regenerate-status").css({display:"none"}),"ok"!=t.status&&alert("There was a problem trying to regenerate the thumbnails.  Please try again."),e(document).trigger("ilab-regeneration-ended")}),!1)})};t();var n=!0,i=!0,a=e('<div class="ilab-loader-container"><div class="ilab-loader ilab-loader-dark"></div></div>'),o=e('<div id="ilab-media-grid-info-popup" class="hidden" style="left:0px; top:0px;"></div>'),s=e('<div class="ilab-media-grid-info-popup-content"></div>'),d=e('<div class="ilab-media-popup-arrow-left"><div></div></div>'),l=e('<div class="ilab-media-popup-arrow-right"><div></div></div>'),c=null,r=!1;o.append(d),o.append(s),o.append(l),e("body").append(o),e(document).on("mouseenter","img.ilab-s3-logo",function(i){if(n){var u=e(this),p=u.data("post-id");"image"!=u.data("mime-type")?o.addClass("ilab-popup-document"):o.removeClass("ilab-popup-document"),r=!1,e("li.attachment").each(function(){var t=e(this);t.data("id")==p?(t.removeClass("info-unfocused"),t.addClass("info-focused")):(t.removeClass("info-focused"),t.addClass("info-unfocused"))}),s.text(""),s.append(a);var m=this.getBoundingClientRect(),f=document.body.scrollTop+(m.top+m.height/2-o.height()/2);f-=28;var h=Math.max(document.documentElement.clientHeight,window.innerHeight||0),g=Math.max(document.documentElement.clientWidth,window.innerWidth||0),v=document.body.scrollTop+h-40,b=0;f+o.height()>v?(b=f+o.height()-v,f=v-o.height()):f<document.body.scrollTop?(b=f-document.body.scrollTop,f=document.body.scrollTop):f<0&&(b=f,f=0),m.left+o.width()<g-10?(c=d,d.css({transform:"translateY("+b+"px)"}),o.removeClass("popup-right"),o.addClass("popup-left"),o.css({left:m.left+"px",top:f+"px"})):(c=l,o.removeClass("popup-left"),o.addClass("popup-right"),l.css({transform:"translateY("+b+"px)"}),o.css({left:m.right-o.width()+"px",top:f+"px"})),o.removeClass("hidden"),setTimeout(function(){var n={action:"ilab_s3_get_media_info",id:p};e.post(ajaxurl,n,function(n,i){if(0!=n.length){var a=e(n);s.text(""),s.append(a),t(),setTimeout(function(){r=!0},500)}},"html")},300)}}),e(document).on("mousemove",function(t){if(r&&i){var a=c.get(0).getBoundingClientRect();a.top-=5,a.bottom+=5;var d=s.get(0).getBoundingClientRect(),l=t.pageX,u=t.pageY-document.body.scrollTop;clientRectContainsPoint(a,l,u)||clientRectContainsPoint(d,l,u)||(n=!1,r=!1,o.addClass("hidden"),e("li.attachment").each(function(){var t=e(this);t.removeClass("info-focused"),t.removeClass("info-unfocused")}),setTimeout(function(){n=!0},300))}}),e(document).on("ilab-regeneration-started",function(){i=!1}),e(document).on("ilab-regeneration-ended",function(){i=!0})}(jQuery);