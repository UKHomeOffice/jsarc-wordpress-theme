var ilabMediaGoogleUploader=function(a,e,o){this.start=function(){var t=o.type;"application/x-photoshop"==t&&(t="image/psd");var r={action:"ilab_upload_prepare",filename:o.name,type:t};a.post(ajaxurl,r,function(t){if("ready"==t.status){e.updateStatusText("Uploading ...");var r=t.key;t.acl;a.ajax({url:t.url,method:"POST",headers:{"x-goog-resumable":"start","Content-Type":o.type},success:function(t,i,n){var s=n.getResponseHeader("location");a.ajax({url:s,method:"PUT",processData:!1,crossDomain:!0,data:o,contentType:o.type,xhr:function(){var o=a.ajaxSettings.xhr();return o.upload.onprogress=function(a){e.updateProgress(a.loaded/a.total)},o},success:function(o){var t={action:"ilab_upload_import_cloud_file",key:r};a.post(ajaxurl,t,function(a){e.itemUploaded("success"==a.status,a)})},error:function(a){e.itemUploadError()}})},error:function(a){e.itemUploadError()}})}else e.itemUploadError()})}};ilabMediaUploadItem.prototype.storageUploader=ilabMediaGoogleUploader;